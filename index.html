<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roulette de R√©compenses</title>
    <style>
        canvas {
            border: 5px solid black;
            display: block;
            margin: 20px auto;
            position: relative;
        }
        button {
            display: block;
            margin: 10px auto;
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h2 style="text-align:center;">Roulette de R√©compenses</h2>
    <div style="position: relative; width: 400px; margin: auto;">
        <canvas id="wheelCanvas" width="400" height="400"></canvas>
        <!-- Curseur Rouge -->
        <div style="
            position: absolute; 
            top: -10px; 
            left: 50%; 
            transform: translateX(-50%);
            width: 0; 
            height: 0; 
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-bottom: 20px solid red;">
        </div>
    </div>
    <button onclick="spinWheel()">Lancer la roue</button>
    <p id="result" style="text-align:center; font-size:18px;"></p>

    <script>
        const canvas = document.getElementById("wheelCanvas");
        const ctx = canvas.getContext("2d");

        const options = [
            "‚òï Un caf√©", 
            "üç∞ Un dessert", 
            "üç∑ Un verre de vin", 
            "‚òï Un caf√©", 
            "üéüÔ∏è 5% de r√©duction", 
            "‚òï Un caf√©", 
            "üßÄ Une planche mixte tapas"
        ];

        const colors = ["#FF5733", "#33FF57", "#5733FF", "#FF33A1", "#33FFF5", "#FFA533", "#A133FF"];

        let startAngle = 0;
        let spinning = false;
        let spinSpeed = 0;

        function drawWheel() {
            const arc = (2 * Math.PI) / options.length;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for (let i = 0; i < options.length; i++) {
                const angle = startAngle + i * arc;
                ctx.fillStyle = colors[i % colors.length];
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2, angle, angle + arc);
                ctx.lineTo(canvas.width / 2, canvas.height / 2);
                ctx.fill();
                ctx.stroke();
                
                ctx.fillStyle = "white";
                ctx.font = "16px Arial";
                ctx.textAlign = "center";
                ctx.save();
                ctx.translate(canvas.width / 2, canvas.height / 2);
                ctx.rotate(angle + arc / 2);
                ctx.fillText(options[i], canvas.width / 3, 0);
                ctx.restore();
            }
        }

        drawWheel();

        function spinWheel() {
            if (spinning) return;
            spinning = true;
            spinSpeed = Math.random() * 0.2 + 0.2; 
            animateSpin();
        }

        function animateSpin() {
            if (spinSpeed > 0.002) {
                startAngle += spinSpeed;
                spinSpeed *= 0.98;
                requestAnimationFrame(animateSpin);
            } else {
                spinSpeed = 0;
                spinning = false;
                determineResult();
            }
            drawWheel();
        }
function determineResult() {
    const arc = (2 * Math.PI) / options.length;
    
    // Ajustement pour que 0 radian soit en haut sous le curseur
    let adjustedAngle = (startAngle % (2 * Math.PI)) - Math.PI / 2;
    
    if (adjustedAngle < 0) {
        adjustedAngle += 2 * Math.PI;
    }

    // Trouver l'index du segment sous le curseur
    const index = Math.floor(adjustedAngle / arc) % options.length;
    
    document.getElementById("result").innerText = "R√©sultat : " + options[index];
}



        document.querySelector("button").addEventListener("click", spinWheel);
    </script>
</body>
</html>
